---
import Layout from '../../layouts/Layout.astro';
import SubPageHero from '../../components/SubPageHero.astro';
import siteConfig from '../../data/site-config.json';
import { url } from '../../utils/links';

const formUrl = siteConfig.sundaySchool.googleFormUrl;
const hasForm = formUrl && formUrl !== 'YOUR_GOOGLE_FORM_URL_HERE';
const registrationOpen = siteConfig.sundaySchool.registrationOpen;
---

<Layout title="Registration">
  <SubPageHero 
    title="Registration"
    subtitle="Enroll your child in our weekend Islamic school"
    parentTitle="Education"
    parentHref={url('/education')}
  />

  <section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      
      {registrationOpen ? (
        <>
          <div class="bg-primary-50 rounded-2xl p-8 mb-8 text-center">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-full mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <h2 class="text-2xl font-bold text-primary-800 mb-2">Registration is Open!</h2>
            <p class="text-primary-700">We are accepting new students for the upcoming semester.</p>
          </div>

          <div class="mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Registration Requirements</h3>
            <ul class="space-y-3 text-gray-600">
              <li class="flex items-start gap-3">
                <svg class="w-5 h-5 text-primary-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                <span>Child must be at least 4 years old by September</span>
              </li>
              <li class="flex items-start gap-3">
                <svg class="w-5 h-5 text-primary-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                <span>Complete registration form with all required information</span>
              </li>
              <li class="flex items-start gap-3">
                <svg class="w-5 h-5 text-primary-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                <span>Pay registration and tuition fees</span>
              </li>
              <li class="flex items-start gap-3">
                <svg class="w-5 h-5 text-primary-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                <span>Agree to school terms and conditions</span>
              </li>
            </ul>
          </div>

          {hasForm ? (
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
              <iframe 
                src={formUrl}
                width="100%" 
                height="800" 
                frameborder="0" 
                marginheight="0" 
                marginwidth="0"
                class="w-full"
              >
                Loadingâ€¦
              </iframe>
            </div>
          ) : (
            <div class="bg-gray-50 rounded-2xl p-8 text-center">
              <p class="text-gray-600 mb-6">
                Please contact us to register your child or get more information about our school.
              </p>
              <a 
                href={url('/contact')}
                class="inline-flex items-center gap-2 px-6 py-3 bg-primary-700 text-white rounded-xl font-semibold hover:bg-primary-800 transition-colors"
              >
                Contact Us to Register
              </a>
            </div>
          )}
        </>
      ) : (
        <div class="bg-gray-100 rounded-2xl p-12 text-center">
          <div class="inline-flex items-center justify-center w-20 h-20 bg-gray-200 rounded-full mb-6">
            <svg class="w-10 h-10 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h2 class="text-2xl font-bold text-gray-700 mb-4">Registration Opening Soon</h2>
          <p class="text-gray-600 max-w-md mx-auto mb-6">
            Registration for the next session will open soon. Please check back later or contact us for more information.
          </p>
          <a 
            href={url('/contact')}
            class="inline-flex items-center gap-2 px-6 py-3 bg-primary-700 text-white rounded-xl font-semibold hover:bg-primary-800 transition-colors"
          >
            Contact Us
          </a>
        </div>
      )}

      <div class="mt-8 flex justify-center gap-4">
        <a 
          href={url('/education/fees')}
          class="inline-flex items-center gap-2 text-primary-600 font-medium hover:text-primary-700"
        >
          View Tuition & Fees
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </div>
    </div>
  </section>
</Layout>
